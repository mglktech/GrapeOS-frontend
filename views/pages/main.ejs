<!DOCTYPE html>
<html lang="en">

<head>
  <%- include("../partials/v3/head")%>
</head>

<body>
  <%- include("../partials/v3/navbar")%>
  <div class="container my-2">
    <div class="row">
      <div class="col style-panel visually-hidden">
        <div class="row">
          <div class="col-2"><img class="img-fluid" src="/v3/assets/img/Discord-Logo-Color.svg"></div>
          <div class="col">
            <div>
              <h5 class="m-0">Discord</h5><span class="text-secondary">Featured Guilds<br></span>
            </div>
          </div>
        </div>
      </div>
      <div class="col-lg-6 style-panel">
        <div class="row">
          <div class="col d-flex align-items-start p-1 mb-2"><img class="img-fluid px-2" src="https://upload.wikimedia.org/wikipedia/commons/8/83/Steam_icon_logo.svg" style="width: 3.5rem;">
            <h5 class="m-0">Steam</h5>
          </div>
          <div class="col">
            <div>
              <div class="d-flex flex-row justify-content-end p-2">
                <div class="d-flex flex-column align-items-end p-2"><span class="d-flex text-info" id="steam-nickname">Pwnstar64</span><span class="d-flex text-info" id="steam-onlinestate">Online</span></div><img class="rounded img-fluid shadow" id="steam-profile-picture" src="https://steamcdn-a.akamaihd.net/steamcommunity/public/images/avatars/6b/6ba1eb3aff7176583889ec2acb10b5e3632f8f66_medium.jpg">
              </div>
            </div>
          </div>
        </div>

        <div id="row-steamCurrentlyPlaying" class="row visually-hidden">
          <div class="col d-flex flex-column"><span class="text-secondary">Currently Playing<br></span><img id="steam-playing-splash" class="rounded shadow" src="https://cdn.akamai.steamstatic.com/steam/apps/892970/header.jpg?t=1639060647">
            <div class="m-2">
              <h5 id="steam-playing-title" class="m-0">Valheim</h5><span id="steam-playing-author" class="text-secondary">Iron Gate AB<br></span>
              <div class="d-flex flex-row flex-wrap" id="steam-playing-genres"><span class="span-game-genre">Action</span><span class="span-game-genre">Adventure</span><span class="span-game-genre">Indie</span><span class="span-game-genre">RPG</span><span class="span-game-genre">Early Access</span></div>
            </div>
          </div>
        </div>
        <div class="row">
          <div class="col d-flex align-items-center px-3 my-2">
            <div>
              <h6 class="m-0">Recently Played</h6><span class="text-secondary" style="font-size: 14px;">Over the past 2 weeks<br></span>
            </div>
          </div>
        </div>

        <% steamRecentGames.forEach((game, index) => {%>
        <div class="row my-2 mx-2">
          <div class="col-2 align-self-center"><a class="text-light fw-bold" href="#">#<%=index + 1%></a>
          </div>
          <div class="col d-flex flex-column justify-content-center">
            <div class="row">
              <div class="col">
                <img class="img-fluid rounded shadow" src="<%=game.gameDetails.header_image%>">
                <div>
                  <h5 class="m-0"><%=game.gameDetails.name%></h5>
                  <span class="text-secondary"><%=game.gameDetails.developers[0]%></span>
                  <div class="d-flex flex-row flex-wrap">
                    <%game.gameDetails.genres.forEach(genre => {%>
                    <span class="span-game-genre"><%=genre.description%></span>
                    <%})%>
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
        <% }); %>


      </div>
      <div class="col mx-auto style-panel">
        <div class="row">
          <div class="col d-flex justify-content-start align-items-center p-1"><i class="fa fa-spotify text-success px-2" style="font-size: 3rem;"></i>
            <div>
              <h5 class="m-0">Spotify</h5><span id="txtPlaying" class="text-secondary">Currently Playing<br></span>
            </div>
          </div>
        </div>
        <div class="row my-2">
          <div class="col-4 d-flex justify-content-center"><img class="rounded img-fluid shadow" id="trackart" src="/v3/assets/img/forever_alone_music_note.png"></div>
          <div class="col d-flex flex-column justify-content-center"><a id="tracktitle" class="text-light fw-bold" href="#">...</a><a id="trackartist" class="text-secondary fw-light" href="#">...</a></div>
        </div>
        <div class="row">
          <div class="col d-flex p-1">
            <div class="d-flex justify-content-center align-items-center rounded shadow mx-2" style="width: 3rem;height: 3rem;padding: 0.5rem;background: rgb(88,16,16);margin-right: 0px;"><img class="img-fluid" src="https://www.last.fm/static/images/footer_logo@2x.49ca51948b0a.png"></div>
            <div>
              <h5 class="m-0">last.fm</h5><span class="text-secondary">Top Tracks<br></span>
            </div>
          </div>
        </div>
        <%lastfmWeeklyTrackChart.forEach(track => {%>
        <div class="row m-2">
          <div class="col-1 d-flex justify-content-center align-items-center">
            <a class="text-light fw-bold" href="">#<%=track["@attr"].rank%></a>
          </div>
          <div class="col-3 d-inline-flex justify-content-center align-items-center">
            <img class="rounded img-fluid img-fluid shadow" src="<%=track.image[2]['#text'];%>">
          </div>
          <div class="col-6 d-flex flex-column justify-content-center">
            <a class="text-light fw-bold" href="#"><%=track.name%></a>
            <a class="text-secondary fw-light" href="#"><%=track.artist['#text']%></a>
          </div>
        </div>
        <%});%>

        <footer class="d-flex justify-content-end">
          <label class="form-label" style="color: rgba(248,249,250,0.36);text-align: right;font-size: 0.8rem;">Data provided by last.fm with Spotify Connect</label>
        </footer>
      </div>
    </div>
  </div>
  <script src="/v3/assets/bootstrap/js/bootstrap.min.js"></script>
  <%- include("../scripts/v3/widgets")%>
</body>

</html>